<div class="container py-5">
  <h1 class="mb-4">{{ title }}</h1>
  <div class="card p-4 mb-4">
    <div class="row g-2 align-items-end">
      <div class="col-md-6">
        <label class="form-label">MSISDN</label>
        <input class="form-control" [(ngModel)]="msisdn" placeholder="5939xxxxxxxx">
      </div>
      <div class="col-md-3 d-grid">
        <button class="btn btn-primary" (click)="fetch()" [disabled]="loading">
          {{ loading ? 'Consultando...' : 'Consultar' }}
        </button>
      </div>
      <div class="col-md-3 d-grid">
        <button class="btn btn-outline-warning" (click)="simulate()">Simular Consumo</button>
      </div>
    </div>
    <div *ngIf="error" class="alert alert-danger mt-3">{{ error }}</div>
  </div>
  <div *ngIf="data" class="row g-4">
    <div class="col-md-4">
      <div class="card p-4 h-100">
        <h5 class="mb-2">Cliente</h5>
        <p class="m-0 fw-bold">{{ data.name }}</p>
        <small class="text-muted">MSISDN: {{ data.msisdn }}</small>
      </div>
    </div>
    <div class="col-md-8">
      <div class="card p-4">
        <div class="row text-center">
          <div class="col-4">
            <div class="h2 mb-0">{{ data.balance | number:'1.2-2' }}</div>
            <div class="text-muted">Saldo (USD)</div>
          </div>
          <div class="col-4">
            <div class="h2 mb-0">{{ data.data_mb | number:'1.0-0' }}</div>
            <div class="text-muted">Datos (MB)</div>
          </div>
          <div class="col-4">
            <div class="h2 mb-0">{{ data.minutes }}</div>
            <div class="text-muted">Minutos</div>
          </div>
        </div>
        <div class="text-end mt-3">
          <span class="badge bg-secondary">Actualizado: {{ data.updated_at | date:'short' }}</span>
        </div>
      </div>
    </div>
  </div>
</div>
