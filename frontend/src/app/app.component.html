<div class="container" style="max-width: 900px; margin: 24px auto;">
  <h1>{{ title }}</h1>

  <div style="display:flex; gap:8px; align-items:center; margin:12px 0;">
    <input [(ngModel)]="msisdn" class="form-control" placeholder="Filtrar por MSISDN (opcional)" />
    <button class="btn btn-primary" (click)="fetch().subscribe()">Buscar</button>
    <button class="btn btn-outline-secondary" (click)="clearFilter()">Limpiar</button>
    <button class="btn btn-outline-info" (click)="startPolling()">Reiniciar polling</button>
  </div>

  <div *ngIf="loading">Cargandoâ€¦</div>
  <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

  <!-- Detalle -->
  <div *ngIf="item">
    <h3>Cliente</h3>
    <table class="table table-striped">
      <tbody>
        <tr><th>MSISDN</th><td>{{ item.msisdn }}</td></tr>
        <tr><th>Nombre</th><td>{{ item.name }}</td></tr>
        <tr><th>Saldo</th><td>{{ item.balance | number:'1.2-2' }}</td></tr>
        <tr><th>Datos (MB)</th><td>{{ item.data_mb | number:'1.0-2' }}</td></tr>
        <tr><th>Minutos</th><td>{{ item.minutes }}</td></tr>
        <tr><th>Actualizado</th><td>{{ item.updated_at }}</td></tr>
      </tbody>
    </table>
    <div style="display:flex; gap:8px;">
      <button class="btn btn-warning" (click)="simulateOne()">Simular consumo</button>
      <button class="btn btn-success" (click)="updatePartial()">Actualizar parcial (demo)</button>
    </div>
  </div>

  <!-- Lista -->
  <div *ngIf="!item && list?.length">
    <h3>Clientes</h3>
    <table class="table table-hover">
      <thead>
        <tr><th>MSISDN</th><th>Nombre</th><th>Saldo</th><th>Datos (MB)</th><th>Minutos</th><th>Actualizado</th></tr>
      </thead>
      <tbody>
        <tr *ngFor="let c of list">
          <td>{{ c.msisdn }}</td>
          <td>{{ c.name }}</td>
          <td>{{ c.balance | number:'1.2-2' }}</td>
          <td>{{ c.data_mb | number:'1.0-2' }}</td>
          <td>{{ c.minutes }}</td>
          <td>{{ c.updated_at }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="!item && !list?.length && !loading"><em>No hay datos.</em></div>
</div>
